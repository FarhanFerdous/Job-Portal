<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}QuantumLapis · Job Portal{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkfQKBQ4Z8FQv4VZ8S4L7Dnk3a1JpN96CB2A+qsSVqS+8CA0nVddOZxVA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    {% block extra_head %}{% endblock %}
    {% load static %}
    <link rel="icon" href="{% static 'images/quantumlapis-logo.svg' %}" type="image/svg+xml">
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>
<body class="bg-body">
    <nav class="navbar navbar-expand-lg navbar-dark gradient-nav mb-4 shadow-sm">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center gap-2" href="{% url 'jobs:job_list' %}">
                <img src="{% static 'images/quantumlapis-logo.svg' %}" alt="QuantumLapis" class="brand-logo">
                <span>QuantumLapis</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item"><a class="nav-link" href="{% url 'jobs:job_list' %}"><i class="fa-solid fa-briefcase"></i> Jobs</a></li>
                    {% if user.is_authenticated and user.role == 'employer' %}
                    <li class="nav-item"><a class="nav-link" href="{% url 'jobs:post_job' %}"><i class="fa-solid fa-plus"></i> Post Job</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url 'jobs:my_jobs' %}"><i class="fa-solid fa-list"></i> My Jobs</a></li>
                    {% endif %}
                </ul>
                <ul class="navbar-nav">
                    {% if user.is_authenticated %}
                        <li class="nav-item"><a class="nav-link" href="{% url 'accounts:dashboard_redirect' %}"><i class="fa-solid fa-gauge"></i> Dashboard</a></li>
                        <li class="nav-item"><a class="nav-link" href="{% url 'accounts:logout' %}"><i class="fa-solid fa-right-from-bracket"></i> Logout</a></li>
                    {% else %}
                        <li class="nav-item"><a class="nav-link" href="{% url 'accounts:login' %}"><i class="fa-solid fa-right-to-bracket"></i> Login</a></li>
                        <li class="nav-item"><a class="nav-link" href="{% url 'accounts:register' %}"><i class="fa-solid fa-user-plus"></i> Register</a></li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>
    <div class="container pb-5">
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">{{ message }}</div>
        {% endfor %}
        {% block content %}{% endblock %}
    </div>
    <div id="qp-splash" class="splash-backdrop">
        <img class="splash-logo" src="{% static 'images/quantumlapis-logo.svg' %}" alt="QuantumLapis">
    </div>
    <footer class="footer text-center text-muted py-4">
        <div class="container small">© {{ now|date:'Y' }} QuantumLapis • Careers made simple</div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      (function() {
        var splash = document.getElementById('qp-splash');
        try {
          var hasSeen = sessionStorage.getItem('qp_splash_seen');
          var reduceMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
          if (!hasSeen && !reduceMotion) {
            splash.classList.add('active');
            window.addEventListener('load', function(){
              sessionStorage.setItem('qp_splash_seen', '1');
              setTimeout(function(){
                splash.classList.add('splash-fade');
                setTimeout(function(){ splash.remove(); }, 550);
              }, 400);
            });
          }
        } catch (e) { /* ignore storage issues */ }
      })();
    </script>
    {% block extra_js %}{% endblock %}
 </body>
</html>

